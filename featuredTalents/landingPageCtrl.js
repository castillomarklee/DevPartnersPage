"use strict";angular.module("app").controller("LandingPageCtrl",["$scope","$state","$stateParams","STATES","$location","$window","$timeout","$dialogAlert","DevPartnersTeam","MEDIA_QUERY_BP","MobileChecker","BlogEntries","BlogEntry","BlogSubcategories","GetStartedService","Analytics","ANALYTICS","Upload","API","$dialogThankYouVideo","$rootScope",function($scope,$state,$stateParams,STATES,$location,$window,$timeout,$dialogAlert,DevPartnersTeam,MEDIA_QUERY_BP,MobileChecker,BlogEntries,BlogEntry,BlogSubcategories,GetStartedService,Analytics,ANALYTICS,Upload,API,$dialogThankYouVideo,$rootScope){$rootScope.hideNavMenus=!0,$rootScope.hideNav=!0,$rootScope.$on("$stateChangeSuccess",function(){$rootScope.hideNavMenus=!1,$rootScope.hideNav=!1});var range,request,vm=this,counter=0;vm.hasFeaturedPost=!1,vm.entry,vm.talentsFilter,vm.showHireButton=!1,vm.skillSet=[],vm.skillSetIDs="",vm.remoteResource="",vm.name="",vm.email="",vm.skype="",vm.contactNumber="",vm.dialCode="",vm.jobDescFileName="",vm.isUploadingMessage="Upload File (Optional)",vm.isSubmittingLeadContacts=!1,vm.leadContactID="",vm.projectDescription="",vm.validProjectDescription=!0,vm.validContact=!0,vm.validSkills=!0,GetStartedService.getSkillSet().then(function(response){vm.skillSet=response.data}),function(){switch($stateParams.technology){case"angularjs":vm.content=DevPartnersTeam.getAngularJSFeaturedContent($stateParams.country);break;case"aspnet":vm.content=DevPartnersTeam.getASPNetFeaturedContent($stateParams.country);break;case"reactjs":vm.content=DevPartnersTeam.getReactJSFeaturedContent($stateParams.country);break;case"ruby-on-rails":vm.content=DevPartnersTeam.getRubyFeaturedContent($stateParams.country);break;case"python":vm.content=DevPartnersTeam.getPythonFeaturedContent($stateParams.country);break;case"laravel":vm.content=DevPartnersTeam.getLaravelFeaturedContent($stateParams.country);break;case"php":vm.content=DevPartnersTeam.getPHPFeaturedContent($stateParams.country);break;case"fullstack":vm.content=DevPartnersTeam.getFullstackFeaturedContent($stateParams.country);break;case"frontend":vm.content=DevPartnersTeam.getFrontendFeaturedContent($stateParams.country);break;case"backend":vm.content=DevPartnersTeam.getBackendFeaturedContent($stateParams.country);break;case"mobile":vm.content=DevPartnersTeam.getMobileFeaturedContent($stateParams.country);break;case"quality-assurance":vm.content=DevPartnersTeam.getQAFeaturedContent($stateParams.country);break;case"freelance":vm.content={averageCosting:{headingHighlight:"Freelance Developer"}};break;case"web":vm.content={averageCosting:{headingHighlight:"Web Developer"}}}vm.featuredTalents=DevPartnersTeam.getFeaturedTalents($stateParams.technology),range=vm.featuredTalents.length,vm.incrementingData=counter,vm.offices=DevPartnersTeam.getOffices(),vm.reasons=DevPartnersTeam.whatMakesUsExperts();var params=$location.search();vm.eventLabel=params&&params.ad?params.ad:$location.path(),vm.developerCode=vm.eventLabel}(),vm.toggleLike=function(){vm.entry.liked?vm.entry.unlike():vm.entry.like()},vm.isScreenSM=function(){return $window.innerWidth<MEDIA_QUERY_BP.SCREEN_SM&&$window.innerWidth>=MEDIA_QUERY_BP.SCREEN_XS},vm.getAdCode=function(){return JSON.stringify({adCode:vm.eventLabel})},vm.isMobile=function(){return MobileChecker.isMobileByScreenSize()},vm.next=function(){if(range<=++counter)return counter=range,!1;vm.incrementingData=counter},vm.previous=function(){if(--counter<0)return counter=0,!1;vm.incrementingData=counter},vm.uploadFiles=function(file,errFiles){vm.f=file,vm.errFile=errFiles&&errFiles[0],file?(file.upload=Upload.upload({url:API.END_POINT+"/Document/upload",data:{file:file}}),file.upload.then(function(response){$timeout(function(){file.result=response.data,vm.jobDescFileName=response.data})},function(response){0<response.status&&(vm.errorMsg=response.status+": "+response.data,$dialogAlert(vm.errorMsg))},function(evt){file.progress=Math.min(100,parseInt(100*evt.loaded/evt.total)),vm.isUploadingMessage=file.progress+"%"})):vm.errFile&&("pattern"==vm.errFile.$error&&$dialogAlert("File is invalid. PDF/DOC only."),"maxTotalSize"==vm.errFile.$error&&$dialogAlert("Please upload document not exceeding to 10mb."))},vm.SubmittedForm=!0,vm.showNextSlide=function(className,param){switch(className){case"contact":if(vm.validContact=param.$valid&&""!=vm.contactNumber,vm.validContact){request={fullName:vm.name,email:vm.email,phone:"("+vm.dialCode+") "+vm.contactNumber,companyName:vm.company,jobDescFileName:vm.jobDescFileName},vm.isSubmittingLeadContacts=!0;var filterCompanyName=angular.lowercase(vm.company);"na"===filterCompanyName||"n/a"===filterCompanyName||"not app"===filterCompanyName||"not applicable"===filterCompanyName||"none"===filterCompanyName?$dialogAlert("NOTE: ","Please enter a valid Company Name."):(vm.SubmittedForm=!1,GetStartedService.getIP().then(function(response){request.sourceIPAddress=response,GetStartedService.saveLead(request).then(function(response){response.success&&(Analytics.trackEvent(ANALYTICS.GET_STARTED_CONTACT,ANALYTICS.ACTION_CLICK,$stateParams.adCode,ANALYTICS.LEAD_CONTACT_FORM),$stateParams.adCode&&AdWordsConversionTracker.reportConversion($stateParams.adCode,"requestQuote","500","$"),vm.leadContactID=response.data.newLeadContactId,vm.SubmittedForm=!0,setTimeout(function(){$state.go(STATES.LANDING_V3)},0))})}))}else!param.myEmail.$valid&&param.myNum.$valid&&param.myName.$valid&&param.myCN.$valid?$dialogAlert("NOTE: ","Please enter valid email address."):$dialogAlert("NOTE: ","A required field has invalid input / missing information. Please enter valid data."),vm.SubmittedForm=!0}}}]);